!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).dhtAjax=t()}(this,(function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._xhr={}}var n,o,i;return n=t,(o=[{key:"abort",value:function(){this._xhr&&this._xhr.abort()}},{key:"splicing",value:function(e){var t="";for(var n in e)t+="".concat(n,"=").concat(e[n],"&");return t="?"+t.substring(0,t.length-1)}},{key:"config",value:function(e){var t=e.prefix,n=void 0===t?"":t,o=e.url,i=void 0===o?"":o,r=e.data,a=void 0===r?{}:r,s=e.method,u=void 0===s?"get":s,c=e.splicing,f=void 0===c||c,l=e.timeout,p=void 0===l?3e4:l,d=e.type,h=void 0===d?"json":d,v=e.header,y=void 0===v?{"Content-Type":"application/json; charset=UTF-8"}:v;i=n+i,"GET"===(u=u.toUpperCase())&&f&&(i+=this.splicing(a));var g={prefix:n,url:i,data:a,splicing:f,method:u,timeout:p,type:h,header:y};return g}},{key:"image",value:function(e){var t,n=this.config(e);t=new Image,t.src=n.url,t=null}},{key:"request",value:function(e){var t,n=this.config(e),o=n.url,i=n.method,r=n.timeout,a=n.header,s=n.type;return window.XMLHttpRequest&&(t=new XMLHttpRequest),this._xhr=t,new Promise((function(e,n){t||n("版本不支持"),t.onloadend=function(n){var o,i=t.status;o="text"===t.responseType?t.responseText:"document"===t.responseType?t.responseXML:t.response,e({data:o,status:i,xhr:n})},t.onerror=function(e){n(e)},t.ontimeout=function(e){n(e)},t.open(i,o,!0),t.responseType=s;for(var u=0,c=Object.keys(a);u<c.length;u++){var f=c[u];t.setRequestHeader(f,a[f])}t.send(null),t.timeout=r}))}}])&&e(n.prototype,o),i&&e(n,i),t}()}));
//# sourceMappingURL=index.js.map
